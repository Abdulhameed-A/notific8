/**
* @author Will Steinmetz
* Notification plug-in inspired by the notification style of Windows 8
* Copyright (c)2013-2016, Will Steinmetz
* Licensed under the BSD license.
* http://opensource.org/licenses/BSD-3-Clause
*/var notific8;notific8=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return window.notific8Defaults={life:1e4,theme:"legacy",color:"teal",sticky:!1,verticalEdge:"right",horizontalEdge:"top",zindex:1100,closeText:"close",onInit:[],onCreate:[],onClose:[],namespace:"notific8",queue:!1,height:{atomic:70,chicchat:120,legacy:90,materialish:48}},window.notific8RegisteredModules={beforeContent:[],afterContent:[],beforeContainer:[],afterContainer:[],insideContainer:[]},window.notific8Queue=[],window.notific8DataStore={},window.notific8ContainerHandlers={onContainerCreate:[]},h=function(a){var b,c,d;for(c=""+a.namespace+"-container",d=document.getElementsByClassName(c),b=document.getElementsByTagName("body")[0];d.length>0;)b.removeChild(d[0])},j=function(a){var b,c,d,e,f;return f=a.settings,e=f.verticalEdge,c=f.horizontalEdge,d=f.namespace,b="."+d+"-container."+e+"."+c,document.querySelector(b)},d=function(d){var e,g,h,i,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z;for(e=document.getElementsByTagName("body")[0],p=Number(e.dataset.notific8s),l=d.settings.namespace,g=j(d),p+=1,e.dataset.notific8s=p,o=""+l+"-notification-"+p,h=m(d),n='<div class="$notificationClasses" id="'+o+'">',x=notific8RegisteredModules.beforeContent,r=0,u=x.length;u>r;r++)i=x[r],k=i.callbackMethod(d),h=h.concat(k.classes),n+=k.html;for(n+='<div class="'+d.settings.namespace+'-message-content">\n  '+b(d)+"\n  "+c(d)+"\n</div>",y=notific8RegisteredModules.afterContent,s=0,v=y.length;v>s;s++)i=y[s],k=i.callbackMethod(d),h=h.concat(k.classes),n+=k.html;if(n+=""+a(d)+"\n</div>",n=n.replace("$notificationClasses",h.join(" ")),g.innerHTML+=n,setTimeout(function(){return(n=document.getElementById(o))?n.style.height=""+d.settings.height+"px":void 0},1),d.settings.onCreate.length)for(z=d.settings.onCreate,t=0,w=z.length;w>t;t++)(q=z[t])(n,d);setTimeout(function(){n=document.getElementById(o),n&&(n.className+=" open",notific8DataStore[o]=d,d.settings.sticky||!function(a,b){setTimeout(function(){f(o,d)},b)}(n,Number(d.settings.life)+200))},5)},a=function(a){var b;return b='<div class="'+a.settings.namespace+"-close",a.settings.sticky?(b+=' sticky">',b+=""+a.settings.closeText):b+='">&times;',b+="</div>"},b=function(a){return null!=a.settings.heading&&"string"==typeof a.settings.heading?'<div class="'+a.settings.namespace+'-heading">\n'+a.settings.heading+"\n</div>":""},c=function(a){return'<div class="'+a.settings.namespace+'-message">\n'+a.message+"\n</div>"},m=function(a){var b;return b=[""+a.settings.namespace+"-notification","family-"+a.settings.theme,a.settings.color],a.settings.sticky&&b.push("sticky"),b},f=function(a,b){var c;c=document.getElementById(a),null!=c&&(c.className=c.className.replace("open",""),c.style.height=0,function(a,c){var d,e,f,g,h,i;if(d=j(b),d.removeChild(a),delete notific8DataStore[c],b.settings.onClose.length)for(i=b.settings.onClose,g=0,h=i.length;h>g;g++)(f=i[g])(a,b);notific8Defaults.queue&&notific8Queue.length&&(e=notific8Queue.shift(),notific8(e.message,e.options))}(c,a))},g=function(a){var b,c;for(b in a)c=a[b],["onInit","onCreate","onClose"].indexOf(b)>-1?"function"==typeof c?notific8Defaults[b].push(c):notific8Defaults[b]=notific8Defaults[b].concat(c):"onContainerCreate"===b?"function"==typeof c?notific8ContainerHandlers.onContainerCreate.push(c):notific8ContainerHandlers.onContainerCreate=notific8ContainerHandlers.onContainerCreate.concat(c):notific8Defaults[b]=c},o=function(a){var b,c;for(b=""+a.namespace+"-notification",c=document.getElementsByClassName(b);c.length>0;)c[0].parentNode.removeChild(c[0])},p=function(a){notific8Defaults.zindex=a},k=function(a,b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r;e={settings:{},message:a},c=["onInit","onCreate","onClose"];for(g in notific8Defaults)i=notific8Defaults[g],"height"!==g&&(e.settings[g]=i);for(g in b)if(i=b[g],c.indexOf(g)>-1)for("function"==typeof i&&(i=[i]),l=0,o=i.length;o>l;l++)f=i[l],e.settings[g].push(f);else e.settings[g]=i;for(k=["onContainerCreate","queue"],m=0,p=k.length;p>m;m++)j=k[m],delete e.settings[j];if(null==e.settings.height&&(e.settings.height=notific8Defaults.height[e.settings.theme]),e.settings.height=Number(e.settings.height),e.settings.height<notific8Defaults.height[e.settings.theme]&&(e.settings.height=notific8Defaults.height[e.settings.theme]),d(e),e.settings.onInit.length)for(r=e.settings.onInit,n=0,q=r.length;q>n;n++)(h=r[n])(e)},l=function(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;for(b=document.getElementsByTagName("body")[0],b.dataset.notific8s=0,d=[""+a.namespace+"-container"],e="",y=notific8RegisteredModules.beforeContainer,m=0,q=y.length;q>m;m++)i=y[m],j=i.callbackMethod(notific8Defaults),d=d.concat(j.classes),e+=j.html;for(e+='<div class="$classes $pos">',z=notific8RegisteredModules.insideContainer,n=0,r=z.length;r>n;n++)i=z[n],j=i.callbackMethod(notific8Defaults),d=d.concat(j.classes),e+=j.html;for(e+="</div>",A=notific8RegisteredModules.afterContainer,o=0,s=A.length;s>o;o++)i=A[o],j=i.callbackMethod(notific8Defaults),d=d.concat(j.classes),e+=j.html;for(B=["top right","top left","bottom right","bottom left"],p=0,t=B.length;t>p;p++)k=B[p],h=e.replace("$pos",k).replace("$classes",d.join(" ")),l=document.implementation.createHTMLDocument("tempDoc"),l.body.innerHTML=h,document.body.appendChild(l.body.firstChild);for(C=document.getElementsByClassName(d[0]),w=0,u=C.length;u>w;w++){for(c=C[w],c.style.zIndex=notific8Defaults.zindex,D=notific8ContainerHandlers.onContainerCreate,x=0,v=D.length;v>x;x++)(g=D[x])(c,a);c.addEventListener("click",function(b){var c,d,e,g;g=b.target,d=g.parentElement,e=""+a.namespace+"-notification",-1!==d.className.split(" ").indexOf(e)&&(c=notific8DataStore[d.id],f(d.id,c))})}},e=function(a){a.verticalEdge=(a.verticalEdge||notific8Defaults.verticalEdge).toLowerCase(),a.horizontalEdge=(a.horizontalEdge||notific8Defaults.horizontalEdge).toLowerCase(),"right"!==a.verticalEdge&&"left"!==a.verticalEdge&&(a.verticalEdge=notific8Defaults.verticalEdge),"top"!==a.horizontalEdge&&"bottom"!==a.horizontalEdge&&(a.horizontalEdge=notific8Defaults.horizontalEdge)},n=function(a,b,c,d){var e,f,g,h,j,k,l;for("string"==typeof a&&""!==a.trim()||i("moduleName should be a string"),h=["beforeContent","afterContent","beforeContainer","afterContainer","insideContainer"],"string"==typeof b&&h.indexOf(b)>-1||i("position should be a string"),"object"!=typeof c&&i("defaultOptions should be an object"),"function"!=typeof d&&i("callbackMethod should be an function"),l=notific8RegisteredModules[b],j=0,k=l.length;k>j;j++)f=l[j],f.moduleName===a&&i("Module '"+a+"' has already been registered");for(g in c)e=c[g],notific8Defaults[g]=e;return notific8RegisteredModules[b].push({moduleName:a,callbackMethod:d})},i=function(a){throw console.error(a),new Error(a)},function(a,b){var c,d,f,j,m,q,r;switch("string"!=typeof a&&i("notific8 takes a string message as the first parameter"),null==b&&(b={}),b.hasOwnProperty("namespace")||"zindex"===a||(b.namespace="notific8"),a){case"configure":case"config":return g(b);case"zindex":return p(b);case"destroy":return h(b);case"remove":return o(b);case"registerModule":return 5!==arguments.length&&i("Registering a module requires the parameters moduleName, position, defaultOptions, and callbackMethod."),a=arguments[0],j=arguments[1],r=arguments[2],f=arguments[3],c=arguments[4],n(j,r,f,c);default:d=""+b.namespace+"-container",0===document.getElementsByClassName(d).length&&l(b),e(b),m=""+b.namespace+"-notification",q=document.getElementsByClassName(m).length,notific8Defaults.queue&&0!==q?notific8Queue.push({message:a,options:b}):k(a,b)}}}();