/**
* @author Will Steinmetz
* Notification plug-in inspired by the notification style of Windows 8
* Copyright (c)2013-2016, Will Steinmetz
* Licensed under the BSD license.
* http://opensource.org/licenses/BSD-3-Clause
*/"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},notific8;notific8=function(){function a(a){var b=a.settings,c=b.verticalEdge,d=b.horizontalEdge,e=b.namespace,f="."+e+"-container."+c+"."+d;return document.querySelector(f)}function b(a){var b=[a.settings.namespace+"-close"],c="&times;";return a.settings.sticky&&(b.push("sticky"),c=a.settings.closeText),'<div class="'+b.join(" ")+'">'+c+"</div>"}function c(a){return null!==a.settings.heading&&"string"==typeof a.settings.heading?'<div class="'+a.settings.namespace+'-heading">'+a.settings.heading+"</div>":""}function d(a){return'<div class="'+a.settings.namespace+'-message">'+a.message+"</div>"}function e(a){var b=void 0;return"legacy"===a.settings.theme.toLowerCase()&&(a.settings.theme="ocho"),b=[a.settings.namespace+"-notification","family-"+a.settings.theme,a.settings.theme,a.settings.color],a.settings.sticky&&b.push("sticky"),null!==a.settings.heading&&b.push("has-heading"),b}function f(b,c){var d=document.getElementById(b);null!==d&&(d.className=d.className.replace("open",""),d.style.height=0,function(b,d){var e=a(c),f=void 0,g=void 0,h=void 0;if(e.removeChild(b),delete notific8DataStore[d],c.settings.onClose.length){h=c.settings.onClose;for(var i=0,j=h.length;j>i;i++)(g=h[i])(b,c)}notific8Defaults.queue&&notific8Queue.length&&(f=notific8Queue.shift(),notific8(f.message,f.options))}(d,b))}function g(a){var b=void 0,c=void 0;for(b in a)c=a[b],["onInit","onCreate","onClose"].indexOf(b)>-1?"function"==typeof c?notific8Defaults[b].push(c):notific8Defaults[b]=notific8Defaults[b].concat(c):"onContainerCreate"===b?"function"==typeof c?notific8ContainerHandlers.onContainerCreate.push(c):notific8ContainerHandlers.onContainerCreate=notific8ContainerHandlers.onContainerCreate.concat(c):notific8Defaults[b]=c}function h(a){for(var b=a.namespace+"-notification",c=document.getElementsByClassName(b);c.length>0;)c[0].parentNode.removeChild(c[0])}function i(a){notific8Defaults.zindex=a}function j(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,p,q,r;d={settings:{},message:a},c=["onInit","onCreate","onClose"];for(i in notific8Defaults)n=notific8Defaults[i],"height"!==i&&(d.settings[i]=n);for(i in b)if(n=b[i],c.indexOf(i)>-1)for("function"==typeof n&&(n=[n]),f=0,j=n.length;j>f;f++)e=n[f],d.settings[i].push(e);else d.settings[i]=n;for(q=["onContainerCreate","queue"],g=0,k=q.length;k>g;g++)p=q[g],delete d.settings[p];if(null==d.settings.height&&(d.settings.height=notific8Defaults.height[d.settings.theme]),d.settings.height=Number(d.settings.height),d.settings.height<notific8Defaults.height[d.settings.theme]&&(d.settings.height=notific8Defaults.height[d.settings.theme]),o(d),d.settings.onInit.length)for(r=d.settings.onInit,h=0,l=r.length;l>h;h++)(m=r[h])(d)}function k(a){a.verticalEdge=(a.verticalEdge||notific8Defaults.verticalEdge).toLowerCase(),a.horizontalEdge=(a.horizontalEdge||notific8Defaults.horizontalEdge).toLowerCase(),-1===["left","right"].indexOf(a.verticalEdge)&&(a.verticalEdge=notific8Defaults.verticalEdge),-1===["top","bottom"].indexOf(a.horizontalEdge)&&(a.horizontalEdge=notific8Defaults.horizontalEdge)}function l(a){throw console.error(a),new Error(a)}function m(a,b,c,d){var e=void 0,f=void 0,g=void 0,h=void 0,i=void 0;"string"==typeof a&&""!==a.trim()||l("moduleName should be a string"),i=["beforeContent","afterContent","beforeContainer","afterContainer","insideContainer"],("string"!=typeof b||i.indexOf(b)>-1)&&l("position should be a string"),"object"!==("undefined"==typeof c?"undefined":_typeof(c))&&l("defaultOptions should be an object"),"function"!=typeof d&&l("callbackMethod should be an function"),h=notific8RegisteredModules[b];for(var j=0,k=h.length;k>j;j++)f=h[j],f.moduleName===a&&l("Module '"+a+"' has already been registered");for(g in c)e=c[g],notific8Defaults[g]=e;return notific8RegisteredModules[b].push({moduleName:a,callbackMethod:d})}function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=void 0,c=void 0;return b=16*Math.random()|0,c="x"===a?b:3&b|8,c.toString(16)})}var o=void 0,p=void 0,q=void 0,r=void 0;return window.notific8Defaults={life:1e4,theme:"ocho",color:"teal",sticky:!1,verticalEdge:"right",horizontalEdge:"top",zindex:1100,closeText:"close",onInit:[],onCreate:[],onClose:[],namespace:"notific8",queue:!1,height:{atomic:70,chicchat:120,ocho:90,materialish:48}},window.notific8RegisteredModules={beforeContent:[],afterContent:[],beforeContainer:[],afterContainer:[],insideContainer:[]},window.notific8Queue=[],window.notific8DataStore={},window.notific8ContainerHandlers={onContainerCreate:[]},p=function(a){var b,c,d;for(c=a.namespace+"-container",d=document.getElementsByClassName(c),b=document.getElementsByTagName("body")[0];d.length>0;)b.removeChild(d[0])},o=function(g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;for(h=document.getElementsByTagName("body")[0],v=Number(h.dataset.notific8s),s=g.settings.namespace,i=a(g),v+=1,h.dataset.notific8s=v,u=s+"-notification-"+v,j=e(g),t='<div\n  class="$notificationClasses"\n  id="'+u+'"\n  data-name="'+g.settings.notificationName+'">',x=notific8RegisteredModules.beforeContent,k=0,n=x.length;n>k;k++)q=x[k],r=q.callbackMethod(g),j=j.concat(r.classes),t+=r.html;for(t+='<div class="'+g.settings.namespace+'-message-content">\n  '+c(g)+"\n  "+d(g)+"\n</div>",y=notific8RegisteredModules.afterContent,l=0,o=y.length;o>l;l++)q=y[l],r=q.callbackMethod(g),j=j.concat(r.classes),t+=r.html;if(t+=b(g)+"\n</div>",t=t.replace("$notificationClasses",j.join(" ")),i.innerHTML+=t,setTimeout(function(){return(t=document.getElementById(u))?t.style.height=g.settings.height+"px":void 0},1),g.settings.onCreate.length)for(z=g.settings.onCreate,m=0,p=z.length;p>m;m++)(w=z[m])(t,g);setTimeout(function(){t=document.getElementById(u),t&&(t.className+=" open",notific8DataStore[u]=g,g.settings.sticky||!function(a,b){setTimeout(function(){f(u,g)},b)}(t,Number(g.settings.life)+200))},5)},r=function(a){var b,c,d,e,f,g;for("object"!==("undefined"==typeof a?"undefined":_typeof(a))&&(a=[a]),g=[],b=0,e=a.length;e>b;b++)f=a[b],g.push(function(){var a;a=[];for(d in notific8Queue){if(c=notific8Queue[d],notific8Queue[d].options.notificationName===f){delete notific8Queue[d];break}a.push(void 0)}return a}());return g},q=function(a){var b,c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;for(b=document.getElementsByTagName("body")[0],b.dataset.notific8s=0,d=[a.namespace+"-container"],e="",x=notific8RegisteredModules.beforeContainer,h=0,k=x.length;k>h;h++)s=x[h],t=s.callbackMethod(notific8Defaults),d=d.concat(t.classes),e+=t.html;for(e+='<div class="$classes $pos">',y=notific8RegisteredModules.insideContainer,i=0,l=y.length;l>i;i++)s=y[i],t=s.callbackMethod(notific8Defaults),d=d.concat(t.classes),e+=t.html;for(e+="</div>",z=notific8RegisteredModules.afterContainer,j=0,m=z.length;m>j;j++)s=z[j],t=s.callbackMethod(notific8Defaults),d=d.concat(t.classes),e+=t.html;for(A=["top right","top left","bottom right","bottom left"],q=0,n=A.length;n>q;q++)w=A[q],r=e.replace("$pos",w).replace("$classes",d.join(" ")),D=document.implementation.createHTMLDocument("tempDoc"),D.body.innerHTML=r,document.body.appendChild(D.body.firstChild);for(B=document.getElementsByClassName(d[0]),u=0,o=B.length;o>u;u++){for(c=B[u],c.style.zIndex=notific8Defaults.zindex,C=notific8ContainerHandlers.onContainerCreate,v=0,p=C.length;p>v;v++)(g=C[v])(c,a);c.addEventListener("click",function(b){var c,d,e,g;g=b.target,d=g.parentElement,e=a.namespace+"-notification",-1!==d.className.split(" ").indexOf(e)&&(c=notific8DataStore[d.id],f(d.id,c))})}},function(a,b){var c=void 0,d=void 0,e=void 0,f=void 0,o=void 0,s=void 0,t=void 0;switch("string"!=typeof a&&l("notific8 takes a string message as the first parameter"),void 0===b&&(b={}),"object"!==("undefined"==typeof b?"undefined":_typeof(b))||b.hasOwnProperty("namespace")||"zindex"===a||(b.namespace="notific8"),a){case"configure":case"config":return g(b);case"zindex":return i(b);case"destroy":return p(b);case"remove":return h(b);case"removeFromQueue":return r(b);case"registerModule":5!==arguments.length&&l("Registering a module requires the parameters moduleName, position, defaultOptions, and callbackMethod."),a=arguments[0];var u=Array.prototype.slice.call(arguments);return f=u[1],t=u[2],e=u[3],c=u[4],m(f,t,e,c);default:return d=b.namespace+"-container",0===document.getElementsByClassName(d).length&&q(b),k(b),o=b.namespace+"-notification",s=document.getElementsByClassName(o).length,b.notificationName||(b.notificationName=n()),notific8Defaults.queue&&0!==s?notific8Queue.push({message:a,options:b}):j(a,b),b.notificationName}}}();